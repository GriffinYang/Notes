# C语言学习记录

## stdio.h：它“包含”了C语言标准输入/输出库的相关信息，我们以#include <stdio.h>将其导入至程序之中

## C语言的执行步骤

1.预处理。首先程序会被送交给预处理器（preprocessor）。预处理器执行以#开头的命令（通常称为指令）。预处理器有点类似于编辑器，它可以给程序添加内容，也可以对程序进行修改。

2.编译。修改后的程序现在可以进入编译器（compiler）了。编译器会把程序翻译成机器指令（即目标代码）。然而，这样的程序还是不可以运行的。

3.链接。在最后一个步骤中，链接器（linker）把由编译器产生的目标代码和所需的其他附加代码整合在一起，这样才最终产生了完全可执行的程序。这些附加代码包括程序中用到的库函数（如printf函数）。

## 编译C语言程序

```bash
cc -o name target.c #使用该语句在UNIX系统中编译target.c，其输出的名称则为name，其中 -o name 可以被省略
```

```bash
gcc -o name target.c #使用gcc编译target.c，name
```

## C程序的基本格式

```bash
指令
int main(void) #此处的void表示该函数不存在参数，如果是int改为void则表示该函数不返回值
{
    语句
}

```

## 指令：在编译C程序之前，预处理器会首先对其进行编辑。我们把预处理器执行的命令称为指令

其中#incude就是一个指令意为将指定的信息(如<stdio.h>)在**编译之前**包含在程序之中，而如<stdio.h>这样的就称之为头(header),每个头都包含一些标准库的内容。所有指令都是以字符#开始的。这个字符可以把C程序中的指令和其他代码区分开来。指令默认只占一行，每条指令的结尾没有分号或其他特殊标记

## 函数:它们是用来构建程序的构建块

函数分为两大类：一类是程序员编写的函数，另一类则是作为C语言实现的一部分提供的函数。我们把后者称为库函数（library function），因为它们属于一个由编译器提供的函数“库”。。在C语言中，函数仅仅是一系列组合在一起并且赋予了名字的语句。某些函数计算数值，某些函数不这么做。计算数值的函数用return语句来指定所“返回”的值。

虽然一个C程序可以包含多个函数，但只有main函数是必须有的。main函数是非常特殊的：在执行程序时系统会自动调用main函数

**注:** main函数的名字是至关重要的，绝对不能改写成begin或者start，甚至写成MAIN也不行。

**注:** 当我们把一个包含小数点的常量赋值给float型变量时，最好在该常量后面加一个字母f（代表float）

## 占位符

%d 打印整形十进制数据

%c 打印字符格式的数据

%f 打印浮点数字（打印小数），我们可以使用%.nf 的格式使其保留n为小数

%p 以地址的形式打印

%x 打印十六进制数字

%s 打印字符串

%fl 打印长整型

%e 打印科学计数法

%g 打印小数或者科学计数法 （且不输出毫无意义的零）

%ld 打印长整型

%u 打印十进制数输出unsigne型数据（无符号数）

%o 打印八进制数字整数

## 初始化式（initializer）

当我们声明了一个变量后可以对其进行赋值或者在声明时直接赋值，那么这个被赋予的值便称之为一个初始化式：

```c
int height=8; //数值8即为一个初始化式
```

我们也可以这样声明多个同类型的变量：

```c
int height=8,length=12,width=10;
```

此时8，12，10都是各自变量的一个初始化式，所以这几个变量的初始化式都是独立的。也就意味着

```c
int height,length,width=10;
```

此时仅有width被初始化了，而其他两个变量却未被赋值。

### scanf('%d',&x):获取用户输入的值将其赋给x并将x的值赋给前面字符串所对应的%d，这里可以含有多个值，但是它们需要按照先后顺序一一对应

## 定义常量

在C语言中我们需要使用#define命令来定义一个常量，这也就意味着它并非是定义在方法之中的，而是与#include <stdio.h>是类似的。

当我们使用#define命令定义一个常量时，可以采用称为宏定义（macro definition）的特性给常量命名：

```C
#define FINAL_VALUE value
```

注意此时我们的value前不可以有'='号，否则在调用该常量时这个常量值前面将同样包含一个'='，初次之外若我们希望该常量是一个表达式，则这个值应由一个括号包含，如：

```C
#define FINAL_VALUE 3+2
int main()
{
 printf(FINAL_VALUE); /*实际运算为3+2*3+2=11*/
 return 0;
}
```

**注1:** 宏的名字只用了大写字母。这是大多数C程序员遵循的规范，但并不是C语言本身的要求。

**注2:** 在C语言之中如果两个整数相除，那么C语言会对结果向下取整。所以如2/3=0,为了解决这个问题我们可以使用2.0f/3.0f代替

**注3:** 在C语言中，标识符可以含有字母、数字和下划线，但是必须以字母或者下划线开头。

**注3:** 我们的函数语句可以都写在一行，但是不包括预处理指令，因为预处理指令要求独立成行

## 格式化输入和输出

### printf函数

printf函数被设计用来显示格式串（format string）的内容，并且在该串中的指定位置插入可能的值。调用printf函数时必须提供格式串，格式串后面的参数是需要在显示时插入到该串中的值：

```bash
printf(格式串，表达式1，表达式2，...);
```

显示的值可以是常量、变量或者更加复杂的表达式。调用printf函数一次可以打印的值的个数没有限制。

格式串包含普通字符和转换说明（conversion specification），其中转换说明以字符%开头。转换说明是用来表示打印过程中待填充的值的占位符。跟随在字符%后边的信息指定了把数值从内部形式（二进制）转换成打印形式（字符）的方法，这也就是“转换说明”这一术语的由来。

案例:

```c
int i,j;
float x,y;
i=10;
j=20;
x=43,2892f;
y=5527.0f;
printf("i=%d,j=%d,x=%f,y=%f\n",i,j,x,y);
/*输出结果为:i=10,j=20,x=43.289200,y=5527.000000*/
```

格式串中的普通字符被简单复制给输出行，而变量i、j、x和y的值则依次替换了4个转换说明。

然而语言编译器不会检测格式串中转换说明的数量是否和输出项的数量相匹配，所以表达式和转换说明之间应当保持一致，否则将会编译失败:

```c
printf("%d %d\n",i); /*转换说明大于输出项*/
printf("%d\n",i,j); /*输出项大于转换说明*/
/*两行均会编译失败*/
```

此外，C语言编译器也不检测转换说明是否适合要显示项的数据类型。如果程序员使用不正确的转换说明，程序将会简单地产生无意义的输出。
